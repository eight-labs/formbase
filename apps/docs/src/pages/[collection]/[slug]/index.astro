---
import ProseLayout from "../../../layouts/ProseLayout.astro";
import { getEntry, render, type CollectionKey } from "astro:content";

const { collection, slug } = Astro.params;
if (!collection || !slug) {
  return Astro.redirect("/");
}
const entry = await getEntry(collection as CollectionKey, slug);
if (!entry) {
  return Astro.redirect("/");
}

Astro.response.headers.set(
  "Cache-Control",
  "public, max-age=3600, s-maxage=3600, stale-while-revalidate=3600"
);

const { Content } = await render(entry);
---

<ProseLayout title={entry.data.title} description={entry.data.description}>
  <Content />
</ProseLayout>
